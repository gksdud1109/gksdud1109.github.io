---
title: "[JPA]JpaRepository"
date: 2025-08-28 09:00:00 +0900
categories: [Spring]
tags: [java, jpa, spring, backend]
---
[JPA overview](https://spring.io/projects/spring-data-jpa#overview)

[ê³µì‹ Jpa ë¬¸ì„œ](https://docs.spring.io/spring-data/jpa/reference/jpa/getting-started.html)

[Jpa api](https://docs.spring.io/spring-data/jpa/reference/api/java/index.html)

[jakarta ee](https://jakarta.ee/learn/)

[jakarta 3.2](https://jakarta.ee/specifications/persistence/3.2/apidocs/jakarta.persistence/module-summary)

## JpaRepository ì¸í„°í˜ì´ìŠ¤

```java
public interface PostRepository extends JpaRepository<Post, Integer> {
}
```

### JpaRepository

[JpaRepository](https://docs.spring.io/spring-data/jpa/reference/api/java/org/springframework/data/jpa/repository/JpaRepository.html)

Spring Data JPAì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¡œ,
ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ì„ ìë™ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” ë ˆí¬ì§€í† ë¦¬ ê¸°ë°˜

ìƒì†ë°›ìœ¼ë©´ êµ¬í˜„ ì—†ì´ë„ ê¸°ë³¸ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì¶”ê°€ êµ¬í˜„ ì—†ì´ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„° ì‘ì—… ê°€ëŠ¥í•¨

- save(entity): ì—”í‹°í‹° ì €ì¥ ë˜ëŠ” ìˆ˜ì •
- findById(id): IDë¡œ ì¡°íšŒ
- findAll(): ì „ì²´ ì¡°íšŒ
- delete(entity): ì‚­ì œ
- count(): ì´ ê°œìˆ˜ ë°˜í™˜

[![2025-08-28-22-35-23.png](https://i.postimg.cc/vB3q30Pd/2025-08-28-22-35-23.png)](https://postimg.cc/YGLzSzKX)

### yml ì„¤ì •

```yml
  jpa:
    properties:
      hibernate:
        format_sql: true
        highlight_sql: true
        use_sql_comments: true
    hibernate:
      ddl-auto: update
    show-sql: true

logging:
  level:
    org.hibernate.orm.jdbc.bind: TRACE
    org.hibernate.orm.jdbc.extract: TRACE

```

> ğŸ’¡ yml ì„¤ì •ì‹œì—ëŠ” í•­ìƒ ë“¤ì—¬ì“°ê¸° ì£¼ì˜ âš ï¸

| ì„¤ì • í‚¤                               | ì„¤ëª…                                                                               |
| :------------------------------------ | :--------------------------------------------------------------------------------- |
| show-sql                              | ì½˜ì†”ì— SQL ì¿¼ë¦¬ ì¶œë ¥ (System.out ì‚¬ìš©)                                             |
| hibernate.ddl-auto                    | DB ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±/ì—…ë°ì´íŠ¸ ì˜µì…˜                                                  |
| properties.hibernate.format_sql       | SQLì„ í¬ë§·íŒ…í•´ì„œ ë³´ê¸° ì¢‹ê²Œ ì¶œë ¥                                                    |
| properties.hibernate.highlight_sql    | SQL ë¡œê·¸ì— ìƒ‰ìƒì„ ì¶”ê°€ (IDE/ì½˜ì†”ì— ìƒ‰ìƒ ì ìš© ê°€ëŠ¥ ì‹œ)                              |
| properties.hibernate.use_sql_comments | ì‹¤í–‰ë˜ëŠ” SQL ì¿¼ë¦¬ ì•ì— ì£¼ì„ ì¶”ê°€ (ë¡œê¹… ë¶„ì„ì— ë„ì›€)                                |
| org.hibernate.orm.jdbc.bind           | ë°”ì¸ë”©ë˜ëŠ” íŒŒë¼ë¯¸í„° ê°’ ì¶œë ¥(ì˜ˆ: ?ì— ì–´ë–¤ ê°’ì´ ë“¤ì–´ê°€ëŠ”ì§€ ë³´ì—¬ì¤Œ)                   |
| org.hibernate.orm.jdbc.extract        | ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ ì¶”ì¶œí–ˆëŠ”ì§€ ë¡œê·¸ë¡œ ì¶œë ¥(ResultSetì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ëŠ” ê³¼ì • í‘œì‹œ) |

> logging.level ì˜µì…˜ì— [org.hibernate.SQL: debug]ë§Œ ì£¼ê²Œë˜ë©´ sql ì¿¼ë¦¬ë¬¸ë§Œ ë³´ì—¬ì¤Œ

#### hibernate.ddl-auto ì£¼ìš” ì˜µì…˜

- none: ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ (ê¸°ë³¸ê°’)
- create: ì‹¤í–‰ ì‹œ í…Œì´ë¸”ì„ ìƒˆë¡œ ìƒì„± (ê¸°ì¡´ í…Œì´ë¸” ì‚­ì œë¨)
- create-drop: createì™€ ê°™ì§€ë§Œ ì•± ì¢…ë£Œ ì‹œ í…Œì´ë¸” ì‚­ì œ
- update: ë³€ê²½ëœ ì—”í‹°í‹°ì— ë§ì¶° í…Œì´ë¸” ìë™ ìˆ˜ì •
- validate: ì—”í‹°í‹°ì™€ í…Œì´ë¸” êµ¬ì¡°ê°€ ë§ëŠ”ì§€ë§Œ í™•ì¸(ìˆ˜ì • ì•ˆí•´ì¤Œ)
- auto: Spring Bootê°€ ì ì ˆíˆ íŒë‹¨í•´ ìë™ ì„ íƒ(ê¶Œì¥í•˜ì§€ ì•ŠìŒ)

### JpaRepository ì‚¬ìš© ì˜ˆ

```java
@Configuration
public class BaseInitData {

    @Autowired
    private PostRepository postRepository;

    @Bean
    ApplicationRunner initDataRunner() {
        return args -> {
            Post post1 = new Post("ì œëª©1", "ë‚´ìš©1");
            postRepository.save(post1);

            postRepository.findById(4);
        };
    }
}
```

- @Configuration ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ ìˆì–´ ì„¤ì • í´ë˜ìŠ¤ë¡œ springì´ ì¸ì‹
- ë‚´ë¶€ì— ì •ì˜ëœ @Beanë©”ì„œë“œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ë¨
- @Autowiredë¡œ PostRepository ë¹ˆ ìë™ ì£¼ì… ë°›ìŒ

ğŸŒ± @Bean

- ì´ ë©”ì„œë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë  ë¡œì§ì„ ì •ì˜
- ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ëŠ” ApplicationRunner íƒ€ì…ì˜ ë¹ˆì´ ëœë‹¤

ğŸŒ± ApplicationRunner

- Spring Bootì˜ ApplicationRunnerëŠ” ì•±ì´ ì™„ì „íˆ ì‹¤í–‰ëœ í›„(@PostConstructë³´ë‹¤ ëŠ¦ê²Œ) ì‹¤í–‰
- ì¼ë°˜ì ìœ¼ë¡œ ì´ˆê¸°í™” ë¡œì§, í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚½ì…, ì™¸ë¶€ ì—°ê²° í™•ì¸ ë“±ì— ì“°ì„

ğŸŒ± postRepository.save(post1);

- ìƒì„±í•œ post1ê°ì²´ë¥¼ ì €ì¥

ğŸŒ± postRepository.findById(4);

- IDê°€ 4ì¸ Postë¥¼ DBì—ì„œ ì¡°íšŒ

### í• ì•„ë²„ì§€ CrudRepository

> [curdRepository](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html) > </br>
> ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤ </br>
> JpaRepository, PagingAndSortingRepositoryë“±ì´ ìƒì†í•˜ê³  ìˆìŒ

[![2025-08-28-23-06-04.png](https://i.postimg.cc/JnVxx93g/2025-08-28-23-06-04.png)](https://postimg.cc/VSgXLZVB)

## JPAì¸í„°í˜ì´ìŠ¤ ìƒì†ë°›ì€ repository ì‚¬ìš©

```java
@Bean
ApplicationRunner initDataRunner() {
    return args -> {
    // postRepository.count();
    // select count(*) from post;

      Post post1 = new Post("ì œëª©1", "ë‚´ìš©1");
      postRepository.save(post1);

      postRepository.findById(1);
      // select * from post where id = 1;
    };
}
```

- postRepositoryëŠ” JpaRepositoryë¥¼ ìƒì† ë°›ê³  ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” JPAê°€ êµ¬í˜„í•´ì¤€ë‹¤.

- BaseInitDataì—ì„œ ì•±ëŸ¬ë„ˆë¡œ ì„œë²„ ì‹œì‘ì‹œì— ì´ˆê¸° ë°ì´í„°ë¥¼ ë„£ì–´ì£¼ëŠ” ì½”ë“œì´ë‹¤.

- íŠ¹ë³„í•œ êµ¬í˜„ì—†ì´ ìƒì†ë°›ì€ save(), findById()ë“±ë“±ì˜ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³  JPAê°€ ì•Œì•„ì„œ sqlì¿¼ë¦¬ë¡œ ë°”ê¿”ì¤€ë‹¤.
