---
title: "[JPA]Service클래스, BaseEntity클래스"
excerpt: "SpringBoot&JPA#7"

categories:
  - JPA

date: 2025-09-09
last_modified_at: 2025-09-09
---

# Service구현

## 구현 최종 코드

```java
@Service
@RequiredArgsConstructor
public class PostService {

    private final PostRepository postRepository;

    public void write(Member author, String title, String content) {
        Post post = new Post(title, content, author);
        postRepository.save(post);
    }

    public void modify(Post post, String title, String content) {
        post.setTitle(title);
        post.setContent(content);

        postRepository.save(post);
    }

    public Optional<Post> getPost(int id) {
        return postRepository.findById(id);
    }

    public long getTotalCount() {
        return postRepository.count();
    }

    public void delete(Post post) {
        postRepository.delete(post);
    }
}
```

- 비즈니스 로직이 바로 repository에 구현되는 것은 바람직하지 않음

- service를 도입해 재사용성도 도모함

- @Service 어노테이션은 @Component와 동일하지만 클래스 용도를 쉽게 알아보기 위해 사용한다

- 생성자주입(@RequiredArgsConstructor)으로 repository 사용

# BaseEntity

## 구현 코드

```java
@MappedSuperclass
@Getter
@EntityListeners(AuditingEntityListener.class)
public abstract class BaseEntity {

    @Id
    @GeneratedValue(strategy = jakarta.persistence.GenerationType.IDENTITY)
    private Long id;

    @CreatedDate
    private LocalDateTime createDate;

    @LastModifiedDate
    private LocalDateTime modifyDate;

}
```

## 용도

엔터티에서 중복되는 기본속성, id와 createDate같은 속성들을 따로 빼서 BaseEndtity에 모아놓고 상속받아서 사용토록한다.

### @MappedSuperclass

- 이 클래스는 JPA 엔티티의 슈퍼클래스로 매핑되며, 상속받는 자식 클래스에 id, createDate, modifyDate 필드가 테이블 컬럼으로 포함된다.

- 단, 이 클래스 자체는 테이블로 매핑되지 않는다.

### @EntityListeners(AuditingEntityListener.class)

- @CreatedDate, @LastModifiedDate와 같은 감사(Auditing) 필드의 자동 설정을 활성화시킨다.

- Spring Data JPA에서 엔티티 생성/수정 시점에 시간 값을 자동으로 넣어주게 됩니다.

- @EnableJpaAuditing을 @SpringBootApplication 또는 설정 클래스에 추가해야한다.
