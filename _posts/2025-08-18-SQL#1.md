---
title: "[MySQL]mysql#1"
excerpt: "도커 설치, 서버 띄우기, 기초 SQL문 작성"

categories:
  - MySQL

date: 2025-08-18
last_modified_at: 2025-08-18
---

## 세팅

[homebrew로 도커 설치](https://k-sky.tistory.com/750)

### 서버 띄우기

```bash
# MySQL 없을 때 띄우는 방법
cd ~ # 운영환경에서는 `cd /`

# 설정파일 만들기
mkdir -p dockerProjects/mysql-1/volumes/etc/mysql/conf.d

# 원하는 설정을 적어주세요.
chmod 644 dockerProjects/mysql-1/volumes/etc/mysql/conf.d/my.cnf 2>/dev/null
echo "[mysqld]
# general_log = ON
# general_log_file = /etc/mysql/conf.d/general.log" > dockerProjects/mysql-1/volumes/etc/mysql/conf.d/my.cnf
chmod 444 dockerProjects/mysql-1/volumes/etc/mysql/conf.d/my.cnf

docker run \
    --name mysql-1 \
    -p 3306:3306 \
    -v /${PWD}/dockerProjects/mysql-1/volumes/var/lib/mysql:/var/lib/mysql \
    -v /${PWD}/dockerProjects/mysql-1/volumes/etc/mysql/conf.d:/etc/mysql/conf.d \
    -e TZ=Asia/Seoul \
    -e MYSQL_ROOT_PASSWORD=lldj123414 \
    -d \
    mysql:8.4.1
```

### 서버 초기화

```bash
# MySQL 없을 때 띄우는 방법
cd ~ # 운영환경에서는 `cd /`

# 기존 컨테이너와 볼륨 제거
docker ps -a | grep -q mysql-1 && docker rm -f mysql-1
rm -rf dockerProjects/mysql-1

# 설정파일 만들기
mkdir -p dockerProjects/mysql-1/volumes/etc/mysql/conf.d

# 원하는 설정을 적어주세요.
echo "[mysqld]
# general_log = ON
# general_log_file = /etc/mysql/conf.d/general.log" > dockerProjects/mysql-1/volumes/etc/mysql/conf.d/my.cnf
chmod 444 dockerProjects/mysql-1/volumes/etc/mysql/conf.d/my.cnf

docker run \
    --name mysql-1 \
    -p 3306:3306 \
    -v /${PWD}/dockerProjects/mysql-1/volumes/var/lib/mysql:/var/lib/mysql \
    -v /${PWD}/dockerProjects/mysql-1/volumes/etc/mysql/conf.d:/etc/mysql/conf.d \
    -e TZ=Asia/Seoul \
    -e MYSQL_ROOT_PASSWORD=lldj123414 \
    -d \
    mysql:8.4.1
```

### ⁉️에러

도커에서 컨테이너 시작시켜보니 아래와 같은 에러 메세지가 뜬다

[![2025-08-18-23-00-17.png](https://i.postimg.cc/nhhJXr4X/2025-08-18-23-00-17.png)](https://postimg.cc/BXkyyqw3)

### ➡️ 3306 포트를 누가 쓰고있음

```bash
lsof -iTCP:3306 -sTCP:LISTEN -nP
```

결과
[![2025-08-18-23-03-50.png](https://i.postimg.cc/zfqRbndn/2025-08-18-23-03-50.png)](https://postimg.cc/QFnMvWZt)

> 로컬에 전에 설치해놨던 mysql 데몬이 3306포트를 잡고 있었다.

### kill

```bash
sudo kill 330
```

### 로컬 mysql 자동시작 중지

```bash
# 시스템 LaunchDaemons/Agents에서 mysql 관련 파일 찾기
ls /Library/LaunchDaemons | grep -i mysql || true
ls /Library/LaunchAgents  | grep -i mysql || true


# 재부팅 후에도 자동 시작하지 않도록 비활성화
# (식별자 ID는 보통 파일명과 유사. 예: com.oracle.mysql.mysqld)
sudo launchctl disable system/<서비스-식별자>

# brew로 깔았다면
brew services stop mysql || true
brew services stop mysql@8.0 || true
brew uninstall --force mysql mysql@8.0 || true

# 자동시작 꺼졌는지 확인
# 남아있는 mysqld가 없어야 함
ps aux | grep -i mysqld | grep -v grep || true
```

## 이제 SQL시작.. 은 내일 한꺼번에 정리해야겠다
